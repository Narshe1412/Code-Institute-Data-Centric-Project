<div>
  <div class="task-bar">
    <div id="task-bar-{{ task.id }}">
      <div id="status-icons">
        <div id="task-action-icons">
          <fa-icon *ngIf="!isCurrentActiveTask()" [icon]="faClock" (click)="setAsActiveTask()"></fa-icon>
        </div>
        <div id="task-actual-status">
          <fa-icon *ngIf="task.status === 'Todo'" [icon]="faPlayCircle" (click)="setTaskStatusTo('InProgress')">
          </fa-icon>
          <fa-icon *ngIf="task.status === 'InProgress'" [icon]="faSquare" (click)="setTaskStatusTo('Done')"></fa-icon>
          <fa-icon *ngIf="task.status === 'Done'" [icon]="faCheckSquare"></fa-icon>
          <fa-icon *ngIf="task.status === 'Archived'" [icon]="faLock"></fa-icon>
        </div>
        <div id="task-delete-archive">
          <fa-icon *ngIf="task.status === 'Done'" [icon]="faLockOpen" (click)="setTaskStatusTo('Archived')"></fa-icon>
          <fa-icon *ngIf="task.status !== 'Done' && task.status !== 'Archived'" [icon]="faTrashAlt"
            (click)="deleteTask()"></fa-icon>
        </div>
      </div>
    </div>
    <div id="title-bar"
      matTooltip="{{ task.description?.length >= 50 ? task.description.substring(0, 50) + '...' : task.description }}">
      <div class="task-ref fixed-sized-font">{{ task.reference }}</div>
      <div class="task-title bold">{{ task.title }}</div>
      <div class="task-expand-details-btn">
        <button class="form-control" id="show-time-details" (click)="expanded = !expanded">
          ...
        </button>
      </div>
    </div>
  </div>
  <div>
    <div class="form-group" *ngIf="expanded">
      <label for="status">Task Status</label>
      <select class="form-control" id="status" required (change)="onSelectStatus($event)">
        <option *ngFor="let status of statusType" [ngValue]="status" [selected]="task.status === status">{{
          status
        }}</option>
      </select>
      <button class="form-control" id="adv-status" (click)="advanceStatus()">> > ></button>
    </div>
  </div>
  <div class="time-list" *ngIf="expanded">
    <app-task-timer-list [timeWorkedList]="task.timeWorked"></app-task-timer-list>
  </div>
</div>
